<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/blog/_next/static/media/648776ef3e7fbd6d-s.p.ttf" as="font" crossorigin="" type="font/ttf"/><link rel="preload" href="/blog/_next/static/media/6d91cd47f81bb898-s.p.ttf" as="font" crossorigin="" type="font/ttf"/><link rel="stylesheet" href="/blog/_next/static/css/551a832b045e3f2c.css" data-precedence="next"/><link rel="stylesheet" href="/blog/_next/static/css/c95096fc0885ed51.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/blog/_next/static/chunks/webpack-88908e4ab5d52d07.js"/><script src="/blog/_next/static/chunks/369afdfc-d73dfdb3aa573d6c.js" async=""></script><script src="/blog/_next/static/chunks/736-5478cc444e2b66fa.js" async=""></script><script src="/blog/_next/static/chunks/main-app-b2d50ad91fd5bbf5.js" async=""></script><script src="/blog/_next/static/chunks/946-7bb2a5e4afc6b1f7.js" async=""></script><script src="/blog/_next/static/chunks/280-b79fce320e74a5a4.js" async=""></script><script src="/blog/_next/static/chunks/app/layout-65bdc963c62dff52.js" async=""></script><script src="/blog/_next/static/chunks/468-6632127e4e879f09.js" async=""></script><script src="/blog/_next/static/chunks/app/posts/%5BpostId%5D/page-44527b51919db6d7.js" async=""></script><title>프론트엔드에서 인증 토큰 관리하기.</title><meta name="description" content="인증 토큰을 프론트엔드에서 관리하면서 느낀점을 정리해보았습니다."/><link rel="icon" href="/blog/favicon.ico" type="image/x-icon" sizes="16x16"/><meta name="next-size-adjust"/><script src="/blog/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_b19a82 __variable_00df45 bg-white text-gray-900"><header class="sticky z-[3] w-full border-b border-gray-100 bg-white transition-all px-3 py-4 top-0"><div class="m-auto max-w-8xl"><h2 class="font-yOnepickBold text-2xl font-bold"><a href="/blog">동그라미</a></h2></div></header><main class="relative z-[2] m-auto my-10 min-h-screen max-w-8xl bg-white px-4"><div class="flex gap-5"><div class="post prism prose max-w-full flex-1"><div class="relative my-4 h-160"><img alt="thumbnail" loading="lazy" decoding="async" data-nimg="fill" class="m-0 object-contain" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" src="/blog/images/thumbnail/jwt.png"/></div><h1 id="도입"><a aria-hidden="true" tabindex="-1" href="#도입"><span class="icon icon-link"></span></a>도입</h1>
<ul>
<li>서비스를 제공하기위해 홈페이지를 개발하면서 인증 토콘을 프론트엔드에서 어떻게 관리할지 고민한 내용을 공유합니다.</li>
</ul>
<br/>
<h2 id="백엔드에서-인증-토큰-관리하기"><a aria-hidden="true" tabindex="-1" href="#백엔드에서-인증-토큰-관리하기"><span class="icon icon-link"></span></a>백엔드에서 인증 토큰 관리하기</h2>
<ul>
<li>프론트엔드 부트캠프에서 신발쇼핑몰 웹사이트를 개발할 때, 팀장으로서 React, Express로 풀스택개발을 맡게되었을 때입니다.</li>
<li>로그인을 하기 위해 어떻게 인증 토큰을 어떻게 관리할 지 정보를 수집했었고, 저는 백엔드에서 모든 인증을 관리하려고 했습니다.</li>
<li>그래서 프론트엔드에서는 백엔드에서 제공해주는 API만 사용하고 별도로 인증 토큰을 관리하지 않도록 기획했습니다.<!-- -->
<ul>
<li>즉, 로그인 API, 로그아웃 API만 프론트엔드에서 사용하는 것입니다.</li>
</ul>
</li>
</ul>
<h3 id="왜-그렇게-생각했나요"><a aria-hidden="true" tabindex="-1" href="#왜-그렇게-생각했나요"><span class="icon icon-link"></span></a>왜 그렇게 생각했나요?</h3>
<ol>
<li>프론트엔드 개발자들이 인증토큰을 이해하기 하기위한 시간적인 부담을 주기 싫었습니다.<!-- -->
<ul>
<li>한달 기간동안 신발 쇼핑몰 프로젝트를 기획-디자인-개발-발표를 진행해야 했습니다.</li>
<li>프론트엔드 개발 팀원들에게 프론트개발 이외의 업무인, 인증 토큰을 이해하라는 부담을 주기 싫었습니다.</li>
<li>그래서, 백엔드에서만 인증 토큰을 관리하려고 했습니다.</li>
</ul>
</li>
<li>프론트엔드에서 인증토큰의 유효성을 확인하기 위한 인증 API 호출이 많이 될 것을 우려했습니다.<!-- -->
<ul>
<li>인증 토큰은 백엔드에서 jwt를 생성하고 cookie로 header에 추가하여 전달했습니다.</li>
<li>백엔드에서 jwt을 생성할 때 유효시간을 정할 수있는데, 유효시간이 지나더라도 jwt는 존재합니다.</li>
<li>프론트엔드에서는 jwt를 백엔드에게 전달 할 때, 유효하지 않는 jwt를 전달하지 않기 위해 프론트에서는 jwt가 유효한지 확인하기 위한 API를 모든 API호출마다 함께 요청을 보낼것입니다.</li>
<li>API의 호출이 반복적으로 되는 것 보다, 백엔드 측에서 모든 API 요청마다 jwt가 유효한지 확인하는 것이 가장 효율적이라고 생각했습니다.</li>
</ul>
</li>
</ol>
<h3 id="그래서-어떻게-했나요"><a aria-hidden="true" tabindex="-1" href="#그래서-어떻게-했나요"><span class="icon icon-link"></span></a>그래서 어떻게 했나요?</h3>
<ul>
<li>jwt으로 accessToken, refreshToken을 유효시간을 설정합니다.</li>
<li>로그인 API 요청을 받고, 정상적인 요청인 경우 token들을 cookie로 보냅니다.<!-- -->
<ul>
<li>cookie와 jwt를 사용한 이유는 세션인증을 할 경우 서버의 메모리를 점유하기 때문에 서버비용의 문제로 이와 같은 결정을 내렸습니다.</li>
</ul>
</li>
<li>인가된 사용자만 API를 호출할 수 있는 API가 요청되었을 경우, token의 유효성을 검사하도록 합니다.<!-- -->
<ul>
<li>만약 token이 없는 경우 에러를 보냅니다.</li>
<li>만약 token이 유효하지 않는 경우 에러를 보냅니다.</li>
<li>유효한 경우 API의 본래 기능을 수행합니다.</li>
</ul>
</li>
</ul>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">const</span> <span class="token function-variable function">authCheck</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">  <span class="token doc-comment comment">/**
</span></span><span class="code-line line-number" line="3"><span class="token doc-comment comment">   * 토큰이 리퀘스트의 Authorization 헤더를 통해 전달되면 req.headers.authorization으로 전달받고
</span></span><span class="code-line line-number" line="4"><span class="token doc-comment comment">   * 토큰이 쿠키를 통해 전달되면 req.cookies.accessToken으로 전달받는다.
</span></span><span class="code-line line-number" line="5"><span class="token doc-comment comment">   */</span>
</span><span class="code-line line-number" line="6">  <span class="token keyword">const</span> accessToken <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token property-access">headers</span><span class="token punctuation">.</span><span class="token property-access">authorization</span> <span class="token operator">||</span> req<span class="token punctuation">.</span><span class="token property-access">cookies</span><span class="token punctuation">.</span><span class="token property-access">accessToken</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8">  <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">    <span class="token keyword">const</span> decoded <span class="token operator">=</span> jwt<span class="token punctuation">.</span><span class="token method function property-access">verify</span><span class="token punctuation">(</span>accessToken<span class="token punctuation">,</span> process<span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">JWT_SECRET_KEY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10">    req<span class="token punctuation">.</span><span class="token property-access">locals</span> <span class="token operator">=</span> decoded<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="11">
</span><span class="code-line line-number" line="12">    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="13">  <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="14">    <span class="token keyword control-flow">return</span> res<span class="token punctuation">.</span><span class="token method function property-access">status</span><span class="token punctuation">(</span><span class="token number">401</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">isSignIn</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="15">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="16"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre>
<hr/>
<h2 id="프론트엔드에서-인증토큰-관리하기"><a aria-hidden="true" tabindex="-1" href="#프론트엔드에서-인증토큰-관리하기"><span class="icon icon-link"></span></a>프론트엔드에서 인증토큰 관리하기</h2>
<ul>
<li>그 이후에 사이드프로젝트로 참여했을 때와 회사 내 프로젝트에 참여할 때 백엔드에서 인증 토큰을 발행해주면 프론트엔드에서 인증토큰을 관리를 해야했습니다.</li>
<li>로그인, 인증토큰 재발행, 인증 토큰 유효성 검사 API를 통해 인증토큰을 관리를 해야했습니다.</li>
</ul>
<h3 id="nextjs에서-인증토큰-관리하기"><a aria-hidden="true" tabindex="-1" href="#nextjs에서-인증토큰-관리하기"><span class="icon icon-link"></span></a>Next.js에서 인증토큰 관리하기</h3>
<ul>
<li>프론트엔드에서 로그인 API를 호출하면, 백엔드는 request body에 accessToken, refreshToken을 전달해줍니다.</li>
<li>프론트엔드에서는 accessToken, refreshToken을 cookie에 저장을 합니다.</li>
</ul>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">import</span> <span class="token punctuation">{</span> cookies <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;next/headers&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">import</span> <span class="token punctuation">{</span> NextRequest<span class="token punctuation">,</span> NextResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;next/server&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">COOKIE_KEYS</span><span class="token punctuation">,</span> <span class="token constant">URL</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;@/constants&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5"><span class="token keyword">import</span> <span class="token punctuation">{</span> crystarInstance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;@/service&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6"><span class="token keyword">import</span> <span class="token punctuation">{</span> LoginFormRequest<span class="token punctuation">,</span> LoginFormResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;@/types&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">POST</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>request<span class="token operator">:</span> NextRequest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">  <span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> LoginFormRequest<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11">  <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token generic-function"><span class="token function">axiosInstance</span><span class="token generic class-name"><span class="token operator">&lt;</span>LoginFormResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="12">    method<span class="token operator">:</span> <span class="token string">&#x27;POST&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="13">    url<span class="token operator">:</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token constant">LOGIN</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="14">    data<span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>form<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="15">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="16">
</span><span class="code-line line-number" line="17">  <span class="token keyword">const</span> <span class="token punctuation">{</span> refreshToken<span class="token punctuation">,</span> accessToken <span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="18">  <span class="token keyword">const</span> cookieStore <span class="token operator">=</span> <span class="token function">cookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="19">
</span><span class="code-line line-number" line="20">  cookieStore<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token constant">COOKIE_KEYS</span><span class="token punctuation">.</span><span class="token constant">ACCESS_TOKEN</span><span class="token punctuation">,</span> accessToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="21">  cookieStore<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token constant">COOKIE_KEYS</span><span class="token punctuation">.</span><span class="token constant">REFRESH_TOKEN</span><span class="token punctuation">,</span> refreshToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="22">
</span><span class="code-line line-number" line="23">  <span class="token keyword">return</span> NextResponse<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="24"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre>
<ul>
<li>프론트엔드에서 인가된 사용자가 API를 요청해야할 때, 프론트엔드에서 API를 요청할 때 accessToken이 유효한지 체킹 후 API 요청을 보내는 조건이 추가<!-- -->
<ul>
<li>만약 accessToken이 유효하지 않을 경우, refreshToken으로 accessToken을 재발행해 주어야합니다.</li>
</ul>
</li>
<li>추가적으로 refreshToken이 유효한지도 체킹해야합니다.<!-- -->
<ul>
<li>1️⃣ accessToken이 유효할 경우 : 통과</li>
<li>2️⃣ accessToken이 유효하지 않을 경우 : 3️⃣ 으로 넘어갑니다.</li>
<li>3️⃣ refrehsToken이 유효할 경우, refreshToken으로 accessToken을 재발행 : 통과</li>
<li>4️⃣ refreshToken이 유효하지 않을 경우 : 에러를 보냅니다.</li>
</ul>
</li>
<li>그리고 middleware.ts 파일에서 페이지 이동마다 cookie에 있는 accessToken을 확인합니다.</li>
</ul>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// # middleware.ts</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">middleware</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>request<span class="token operator">:</span> NextRequest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">  <span class="token keyword">const</span> <span class="token punctuation">{</span> nextUrl <span class="token punctuation">}</span> <span class="token operator">=</span> request<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5">  <span class="token keyword">const</span> isValidAccessToken <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">checkAccessToken</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span>getAccessToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6">  <span class="token keyword">const</span> isValidRefreshToken <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">checkRefreshToken</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span>getRefreshToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8">  <span class="token keyword">return</span> NextResponse<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11"><span class="token keyword">const</span> <span class="token function-variable function">checkAccessToken</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>accessToken<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="12">  <span class="token keyword">try</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="13">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>accessToken<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="14">
</span><span class="code-line line-number" line="15">    <span class="token keyword">await</span> <span class="token function">axiosInstance</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="16">      method<span class="token operator">:</span> <span class="token string">&#x27;POST&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="17">      url<span class="token operator">:</span> <span class="token constant">CONSTRAINT_URL</span><span class="token punctuation">.</span><span class="token constant">VALIDATE_ACCESS_TOKEN</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="18">      headers<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="19">        Authorization<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>accessToken<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="20">      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="21">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="22">    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="23">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="24">    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="25">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="26"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="27">
</span><span class="code-line line-number" line="28"><span class="token keyword">const</span> <span class="token function-variable function">checkRefreshToken</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>refreshToken<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="29">  <span class="token keyword">try</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="30">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>refreshToken<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="31">
</span><span class="code-line line-number" line="32">    <span class="token keyword">await</span> <span class="token function">axiosInstance</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="33">      method<span class="token operator">:</span> <span class="token string">&#x27;POST&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="34">      url<span class="token operator">:</span> <span class="token constant">CONSTRAINT_URL</span><span class="token punctuation">.</span><span class="token constant">VALIDATE_REFRESH_TOKEN</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="35">      headers<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="36">        <span class="token string-property property">&#x27;Refresh-Token&#x27;</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>refreshToken<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="37">      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="38">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="39">    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="40">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="41">    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="42">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="43"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="44">
</span><span class="code-line line-number" line="45"><span class="token keyword">const</span> <span class="token function-variable function">cookieToken</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="46">  <span class="token keyword">const</span> cookieStore <span class="token operator">=</span> <span class="token function">cookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="47">
</span><span class="code-line line-number" line="48">  <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="49">    <span class="token keyword">get</span> <span class="token function">getAccessToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="50">      <span class="token keyword">return</span> cookieStore<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token constant">COOKIE_KEYS</span><span class="token punctuation">.</span><span class="token constant">ACCESS_TOKEN</span><span class="token punctuation">)</span><span class="token operator">?.</span>value <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="51">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="52">    <span class="token keyword">get</span> <span class="token function">getRefreshToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="53">      <span class="token keyword">return</span> cookieStore<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token constant">COOKIE_KEYS</span><span class="token punctuation">.</span><span class="token constant">REFRESH_TOKEN</span><span class="token punctuation">)</span><span class="token operator">?.</span>value <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="54">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="55">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="56"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre>
<ul>
<li>
<p>1️⃣ 인가된 사용자만 들어올 수 있는 페이지에 인가 사용자가 접근한 경우 : 통과</p>
</li>
<li>
<p>2️⃣ 인가된 사용자만 들어올 수 있는 페이지에 비인가 사용자가 접근한 경우</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line line-number" line="1"><span class="token comment">/**
</span></span><span class="code-line line-number" line="2"><span class="token comment"> * **비인가 사용자**가 인증이 요구되는 페이지에 접근한 경우, 로그인 페이지로 리다이렉트
</span></span><span class="code-line line-number" line="3"><span class="token comment"> */</span>
</span><span class="code-line line-number" line="4"><span class="token keyword">const</span> isPrivatePath <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token constant">PRIVATE_PATH</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>path <span class="token operator">=&gt;</span> nextUrl<span class="token punctuation">.</span>pathname<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5"><span class="token keyword">if</span> <span class="token punctuation">(</span>isPrivatePath <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span>isValidAccessToken <span class="token operator">||</span> <span class="token operator">!</span>isValidRefreshToken<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">  <span class="token keyword">const</span> res <span class="token operator">=</span> NextResponse<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token constant">URL</span></span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>locale<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">PATH</span><span class="token punctuation">.</span><span class="token constant">LOGIN</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8">  res<span class="token punctuation">.</span>cookies<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token constant">COOKIE_KEYS</span><span class="token punctuation">.</span><span class="token constant">ACCESS_TOKEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9">  res<span class="token punctuation">.</span>cookies<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token constant">COOKIE_KEYS</span><span class="token punctuation">.</span><span class="token constant">REFRESH_TOKEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11">  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="12"><span class="token punctuation">}</span>
</span></code></pre>
<ul>
<li>1️⃣ refreshToken이 유효할 경우, accessToken을 재발행 : 통과</li>
<li>2️⃣ refreshToken이 유효하지 않을 경우 : 로그인페이지 리다이렉트</li>
</ul>
</li>
<li>
<p>3️⃣ 비인가된 사용자만 들어올 수 있는 페이지에 인가 사용자가 접근한 경우 : 메인페이지 리다이렉트</p>
</li>
</ul>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// Auth redirect</span>
</span><span class="code-line line-number" line="2"><span class="token comment">/**
</span></span><span class="code-line line-number" line="3"><span class="token comment"> * **인증된 사용자**가 비인증이 요구되는 페이지에 접근한 경우, 메인 페이지로 리다이렉트
</span></span><span class="code-line line-number" line="4"><span class="token comment"> */</span>
</span><span class="code-line line-number" line="5"><span class="token keyword">const</span> isPublicAccess <span class="token operator">=</span> <span class="token constant">PUBLIC_PATHS</span><span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>path <span class="token operator">=&gt;</span> nextUrl<span class="token punctuation">.</span>pathname<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6"><span class="token keyword">if</span> <span class="token punctuation">(</span>isPublicAccess <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>isValidAccessToken <span class="token operator">||</span> isValidRefreshToken<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">  <span class="token keyword">return</span> NextResponse<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token constant">URL</span></span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>locale<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">PRIVATE_PATH</span><span class="token punctuation">.</span><span class="token constant">ANALYSIS_NOT_ANALYZED</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8"><span class="token punctuation">}</span>
</span></code></pre>
<ul>
<li>4️⃣ 비인가된 사용자만 들어올 수 있는 페이지에 비인가 사용자가 접근한 경우<!-- -->
<ul>
<li>1️⃣ refreshToken이 유효할 경우, accessToken을 재발행 : 메인페이지 리다이렉트</li>
<li>2️⃣ refreshToken이 유효하지 않을 경우 : 통과</li>
</ul>
</li>
</ul>
<h3 id="왜-accesstoken-refreshtoken의-유효성을-검사하고-재발행할까요"><a aria-hidden="true" tabindex="-1" href="#왜-accesstoken-refreshtoken의-유효성을-검사하고-재발행할까요"><span class="icon icon-link"></span></a>왜 accessToken, refreshToken의 유효성을 검사하고 재발행할까요?</h3>
<ul>
<li>
<p>그 이유는 여러번 API호출하고 코드를 조금 더 이해하기 쉽게 만들기 위해서입니다.</p>
</li>
<li>
<p>만약 토큰을 유효성검사를 하지 않으면 아래와 같은 flow일 겁니다. 예시로, user 정보 데이터를 불러와야하는 경우를 들겠습니다.</p>
<ul>
<li>
<ol>
<li>프론트엔드에서 유저 정보를 가져오는 API를 호출합니다.</li>
</ol>
</li>
<li>
<ol start="2">
<li>백엔드에서는 401 에러를 내뱉습니다.</li>
</ol>
</li>
<li>
<ol start="3">
<li>프론트엔드에서는 401 에러를 캐치하고, refreshToken의 유효성을 검사합니다.</li>
</ol>
</li>
<li>
<ol start="4">
<li>refreshToken이 유효하면 accessToken을 재발행합니다.</li>
</ol>
</li>
<li>
<ol start="5">
<li>재발행한 accessToken을 cookie에 추가합니다.</li>
</ol>
</li>
<li>
<ol start="6">
<li>다시, 유저 정보를 가져오는 API를 호출합니다.</li>
</ol>
</li>
</ul>
</li>
<li>
<p>그리고, 토큰을 유효성 검사를 하게되면 아래와 같은 flow일 겁니다. 예시는 동일합니다.</p>
<ul>
<li>
<ol>
<li>프론트엔드에서 accessToken의 유효성을 검사합니다.</li>
</ol>
</li>
<li>
<ol start="2">
<li>accessToken의 유효하지 않다면 refreshToken의 유효성을 검사합니다.</li>
</ol>
</li>
<li>
<ol start="3">
<li>refreshToken이 유효하면 accessToken을 재발행합니다.</li>
</ol>
</li>
<li>
<ol start="4">
<li>재발행한 accessToken을 cookie에 추가합니다.</li>
</ol>
</li>
<li>
<ol start="5">
<li>프론트엔드에서 유저 정보를 가져오는 API를 호출합니다.</li>
</ol>
</li>
</ul>
</li>
<li>
<p>첫번째 경우에는 코드 실행순서가 위에서 아래로갔다가 다시 위로 가는 코드를 작성해야하기 때문에 가독성이 나쁩니다.</p>
</li>
<li>
<p>두번째 경우에는 코드 실행순서가 위에서 아래로 이동하기 때문에 가독성이 좋습니다.</p>
</li>
</ul>
<hr/>
<h2 id="마지막-소감"><a aria-hidden="true" tabindex="-1" href="#마지막-소감"><span class="icon icon-link"></span></a>마지막 소감</h2>
<ul>
<li>백엔드와 프론트엔드에서 인증토큰을 관리해본 경험이 있습니다. 둘다 해보았을 때 저는 백엔드에서 인증토큰을 관리하는게 훨씬 편했습니다.</li>
<li>인증토큰을 생성하는 쪽 따로, 관리하는 쪽 따로 있다는 것은 이슈가 발생했을 때 어느쪽에서 이슈가 발생했는지 원인을 찾기가 어려울 것 같다는 생각을 갖게되었습니다.</li>
<li>또한, 프론트엔드에서 인증을 하기 위해 모든 API에 토큰이 유효한지 체킹하는 것이 대규모 서비스를 사용할 경우에는 서버 과부하의 문제가 발생하지 않을까 하는 우려되는 부분도 있습니다.</li>
<li>하지만, 인증 토큰에 대해서 잘 알고 이슈가 발생하더라도 대처를 잘 할 줄 안다면, 프론트엔드이든 백엔드이든 관리만 잘 된다면 문제가 없을 거라는 생각을 하게되었습니다.</li>
<li>이 경험을 통해, 프론트엔드/백엔드 측에서의 생각의 시야를 넓히게된 좋은 경험이었습니다.</li>
</ul></div><div class="relative max-w-60"><div class="sticky right-0 top-16 rounded-lg bg-white lg:hidden"><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--></div><div class="sticky right-0 top-16 max-h-svh overflow-y-scroll scrollbar-hide max-lg:hidden"><div class="flex flex-col gap-2 border-l-2 border-gray-200"><a class="block cursor-pointer break-all border-l-2 border-transparent py-1 hover:border-blue-600 hover:text-blue-300" href="#도입" style="padding-left:10px">도입</a><a class="block cursor-pointer break-all border-l-2 border-transparent py-1 hover:border-blue-600 hover:text-blue-300" href="#백엔드에서-인증-토큰-관리하기" style="padding-left:20px">백엔드에서 인증 토큰 관리하기</a><a class="block cursor-pointer break-all border-l-2 border-transparent py-1 hover:border-blue-600 hover:text-blue-300" href="#왜-그렇게-생각했나요" style="padding-left:30px">왜 그렇게 생각했나요?</a><a class="block cursor-pointer break-all border-l-2 border-transparent py-1 hover:border-blue-600 hover:text-blue-300" href="#그래서-어떻게-했나요" style="padding-left:30px">그래서 어떻게 했나요?</a><a class="block cursor-pointer break-all border-l-2 border-transparent py-1 hover:border-blue-600 hover:text-blue-300" href="#프론트엔드에서-인증토큰-관리하기" style="padding-left:20px">프론트엔드에서 인증토큰 관리하기</a><a class="block cursor-pointer break-all border-l-2 border-transparent py-1 hover:border-blue-600 hover:text-blue-300" href="#nextjs에서-인증토큰-관리하기" style="padding-left:30px">Next.js에서 인증토큰 관리하기</a><a class="block cursor-pointer break-all border-l-2 border-transparent py-1 hover:border-blue-600 hover:text-blue-300" href="#왜-accesstoken-refreshtoken의-유효성을-검사하고-재발행할까요" style="padding-left:30px">왜 accessToken, refreshToken의 유효성을 검사하고 재발행할까요?</a><a class="block cursor-pointer break-all border-l-2 border-transparent py-1 hover:border-blue-600 hover:text-blue-300" href="#마지막-소감" style="padding-left:20px">마지막 소감</a></div></div></div><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--></div></main><footer class="relative z-[1] h-48 w-full bg-gray-0 text-xs shadow-inner"><div class="m-auto max-w-8xl"><div class="h-inherit fixed bottom-0 z-[5] mx-auto flex w-full max-w-8xl flex-wrap items-center justify-between gap-4 px-3 py-4"><div class="flex w-full justify-between"><div class="flex flex-col gap-2"><h4 class="typo-xs700"><span>마크다운 블로그</span></h4><div>© <span>2025<!-- --> LEE_DONG_GYU, All rights reserved.</span></div></div><div><a href="https://github.com/tenenger7125/blog" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16" class="h-6 w-6"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"></path></svg></a></div></div></div></div></footer><script src="/blog/_next/static/chunks/webpack-88908e4ab5d52d07.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/blog/_next/static/media/648776ef3e7fbd6d-s.p.ttf\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/ttf\"}]\n2:HL[\"/blog/_next/static/media/6d91cd47f81bb898-s.p.ttf\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/ttf\"}]\n3:HL[\"/blog/_next/static/css/551a832b045e3f2c.css\",\"style\"]\n4:HL[\"/blog/_next/static/css/c95096fc0885ed51.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"5:I[4338,[],\"\"]\n8:I[9677,[],\"\"]\na:I[1372,[],\"\"]\nb:I[2367,[\"946\",\"static/chunks/946-7bb2a5e4afc6b1f7.js\",\"280\",\"static/chunks/280-b79fce320e74a5a4.js\",\"185\",\"static/chunks/app/layout-65bdc963c62dff52.js\"],\"default\"]\nd:I[574,[],\"\"]\n9:[\"postId\",\"9\",\"d\"]\ne:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L5\",null,{\"buildId\":\"yE1GW0L2j_o1p_-skvNzv\",\"assetPrefix\":\"/blog\",\"urlParts\":[\"\",\"posts\",\"9\"],\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"postId\",\"9\",\"d\"],{\"children\":[\"__PAGE__?{\\\"postId\\\":\\\"9\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"postId\",\"9\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L6\",\"$L7\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/blog/_next/static/css/c95096fc0885ed51.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]],null],null]},[null,[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"$9\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[null,[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/blog/_next/static/css/551a832b045e3f2c.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"ko\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_b19a82 __variable_00df45 bg-white text-gray-900\",\"children\":[[\"$\",\"$Lb\",null,{}],[\"$\",\"main\",null,{\"className\":\"relative z-[2] m-auto my-10 min-h-screen max-w-8xl bg-white px-4\",\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}]}],[\"$\",\"footer\",null,{\"className\":\"relative z-[1] h-48 w-full bg-gray-0 text-xs shadow-inner\",\"children\":[\"$\",\"div\",null,{\"className\":\"m-auto max-w-8xl\",\"children\":[\"$\",\"div\",null,{\"className\":\"h-inherit fixed bottom-0 z-[5] mx-auto flex w-full max-w-8xl flex-wrap items-center justify-between gap-4 px-3 py-4\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex w-full justify-between\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex flex-col gap-2\",\"children\":[[\"$\",\"h4\",null,{\"className\":\"typo-xs700\",\"children\":[\"$\",\"span\",null,{\"children\":\"마크다운 블로그\"}]}],[\"$\",\"div\",null,{\"children\":[\"© \",[\"$\",\"span\",null,{\"children\":[2025,\" LEE_DONG_GYU, All rights reserved.\"]}]]}]]}],[\"$\",\"div\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://github.com/tenenger7125/blog\",\"rel\":\"noopener noreferrer\",\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 16 16\",\"className\":\"h-6 w-6\",\"children\":[\"$\",\"path\",null,{\"d\":\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8\"}]}]}]}]]}]}]}]}]]}]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$Lc\"],\"globalErrorComponent\":\"$d\",\"missingSlots\":\"$We\"}]\n"])</script><script>self.__next_f.push([1,"f:I[5593,[\"468\",\"static/chunks/468-6632127e4e879f09.js\",\"654\",\"static/chunks/app/posts/%5BpostId%5D/page-44527b51919db6d7.js\"],\"Image\"]\n10:I[4356,[\"468\",\"static/chunks/468-6632127e4e879f09.js\",\"654\",\"static/chunks/app/posts/%5BpostId%5D/page-44527b51919db6d7.js\"],\"default\"]\n"])</script><script>self.__next_f.push([1,"7:[\"$\",\"div\",null,{\"className\":\"flex gap-5\",\"children\":[[\"$\",\"div\",null,{\"className\":\"post prism prose max-w-full flex-1\",\"children\":[[\"$\",\"div\",null,{\"className\":\"relative my-4 h-160\",\"children\":[\"$\",\"$Lf\",null,{\"alt\":\"thumbnail\",\"className\":\"m-0 object-contain\",\"src\":\"/blog/images/thumbnail/jwt.png\",\"fill\":true}]}],[[\"$\",\"h1\",null,{\"id\":\"도입\",\"children\":[[\"$\",\"a\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#도입\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"도입\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"서비스를 제공하기위해 홈페이지를 개발하면서 인증 토콘을 프론트엔드에서 어떻게 관리할지 고민한 내용을 공유합니다.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"br\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"백엔드에서-인증-토큰-관리하기\",\"children\":[[\"$\",\"a\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#백엔드에서-인증-토큰-관리하기\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"백엔드에서 인증 토큰 관리하기\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"프론트엔드 부트캠프에서 신발쇼핑몰 웹사이트를 개발할 때, 팀장으로서 React, Express로 풀스택개발을 맡게되었을 때입니다.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"로그인을 하기 위해 어떻게 인증 토큰을 어떻게 관리할 지 정보를 수집했었고, 저는 백엔드에서 모든 인증을 관리하려고 했습니다.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"그래서 프론트엔드에서는 백엔드에서 제공해주는 API만 사용하고 별도로 인증 토큰을 관리하지 않도록 기획했습니다.\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"즉, 로그인 API, 로그아웃 API만 프론트엔드에서 사용하는 것입니다.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"왜-그렇게-생각했나요\",\"children\":[[\"$\",\"a\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#왜-그렇게-생각했나요\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"왜 그렇게 생각했나요?\"]}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"프론트엔드 개발자들이 인증토큰을 이해하기 하기위한 시간적인 부담을 주기 싫었습니다.\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"한달 기간동안 신발 쇼핑몰 프로젝트를 기획-디자인-개발-발표를 진행해야 했습니다.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"프론트엔드 개발 팀원들에게 프론트개발 이외의 업무인, 인증 토큰을 이해하라는 부담을 주기 싫었습니다.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"그래서, 백엔드에서만 인증 토큰을 관리하려고 했습니다.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"프론트엔드에서 인증토큰의 유효성을 확인하기 위한 인증 API 호출이 많이 될 것을 우려했습니다.\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"인증 토큰은 백엔드에서 jwt를 생성하고 cookie로 header에 추가하여 전달했습니다.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"백엔드에서 jwt을 생성할 때 유효시간을 정할 수있는데, 유효시간이 지나더라도 jwt는 존재합니다.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"프론트엔드에서는 jwt를 백엔드에게 전달 할 때, 유효하지 않는 jwt를 전달하지 않기 위해 프론트에서는 jwt가 유효한지 확인하기 위한 API를 모든 API호출마다 함께 요청을 보낼것입니다.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"API의 호출이 반복적으로 되는 것 보다, 백엔드 측에서 모든 API 요청마다 jwt가 유효한지 확인하는 것이 가장 효율적이라고 생각했습니다.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"그래서-어떻게-했나요\",\"children\":[[\"$\",\"a\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#그래서-어떻게-했나요\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"그래서 어떻게 했나요?\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"jwt으로 accessToken, refreshToken을 유효시간을 설정합니다.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"로그인 API 요청을 받고, 정상적인 요청인 경우 token들을 cookie로 보냅니다.\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"cookie와 jwt를 사용한 이유는 세션인증을 할 경우 서버의 메모리를 점유하기 때문에 서버비용의 문제로 이와 같은 결정을 내렸습니다.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"인가된 사용자만 API를 호출할 수 있는 API가 요청되었을 경우, token의 유효성을 검사하도록 합니다.\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"만약 token이 없는 경우 에러를 보냅니다.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"만약 token이 유효하지 않는 경우 에러를 보냅니다.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"유효한 경우 API의 본래 기능을 수행합니다.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-js\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-js code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"1\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function-variable function\",\"children\":\"authCheck\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":[\"req\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" res\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" next\"]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token arrow operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"2\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"3\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * 토큰이 리퀘스트의 Authorization 헤더를 통해 전달되면 req.headers.authorization으로 전달받고\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"4\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * 토큰이 쿠키를 통해 전달되면 req.cookies.accessToken으로 전달받는다.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"5\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"6\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" accessToken \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" req\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"headers\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"authorization\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"||\"}],\" req\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"cookies\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"accessToken\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"7\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"8\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"try\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"9\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" decoded \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" jwt\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"verify\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"accessToken\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" process\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"env\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"JWT_SECRET_KEY\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"10\",\"children\":[\"    req\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"locals\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" decoded\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"11\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"12\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"next\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"13\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"catch\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"e\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"14\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"return\"}],\" res\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"status\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"401\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"send\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token literal-property property\",\"children\":\"isSignIn\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"15\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"16\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"프론트엔드에서-인증토큰-관리하기\",\"children\":[[\"$\",\"a\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#프론트엔드에서-인증토큰-관리하기\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"프론트엔드에서 인증토큰 관리하기\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"그 이후에 사이드프로젝트로 참여했을 때와 회사 내 프로젝트에 참여할 때 백엔드에서 인증 토큰을 발행해주면 프론트엔드에서 인증토큰을 관리를 해야했습니다.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"로그인, 인증토큰 재발행, 인증 토큰 유효성 검사 API를 통해 인증토큰을 관리를 해야했습니다.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"nextjs에서-인증토큰-관리하기\",\"children\":[[\"$\",\"a\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#nextjs에서-인증토큰-관리하기\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Next.js에서 인증토큰 관리하기\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"프론트엔드에서 로그인 API를 호출하면, 백엔드는 request body에 accessToken, refreshToken을 전달해줍니다.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"프론트엔드에서는 accessToken, refreshToken을 cookie에 저장을 합니다.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-ts\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-ts code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"1\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" cookies \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'next/headers'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" NextRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" NextResponse \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'next/server'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"3\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"4\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"COOKIE_KEYS\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"URL\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'@/constants'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"5\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" crystarInstance \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'@/service'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"6\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" LoginFormRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" LoginFormResponse \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'@/types'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"7\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"8\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"export\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function-variable function\",\"children\":\"POST\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"request\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" NextRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"9\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" form \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"json\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"as\"}],\" LoginFormRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"10\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"11\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" data \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token generic-function\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"axiosInstance\"}],[\"$\",\"span\",null,{\"className\":\"token generic class-name\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003c\"}],\"LoginFormResponse\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e\"}]]}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"12\",\"children\":[\"    method\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'POST'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"13\",\"children\":[\"    url\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"URL\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"LOGIN\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"14\",\"children\":[\"    data\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"JSON\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"stringify\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"form\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"15\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"16\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"17\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" refreshToken\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" accessToken \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" data\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"data\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"18\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" cookieStore \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"cookies\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"19\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"20\",\"children\":[\"  cookieStore\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"set\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"COOKIE_KEYS\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"ACCESS_TOKEN\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" accessToken\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"21\",\"children\":[\"  cookieStore\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"set\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"COOKIE_KEYS\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"REFRESH_TOKEN\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" refreshToken\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"22\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"23\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" NextResponse\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"json\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"data\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"24\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"프론트엔드에서 인가된 사용자가 API를 요청해야할 때, 프론트엔드에서 API를 요청할 때 accessToken이 유효한지 체킹 후 API 요청을 보내는 조건이 추가\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"만약 accessToken이 유효하지 않을 경우, refreshToken으로 accessToken을 재발행해 주어야합니다.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"추가적으로 refreshToken이 유효한지도 체킹해야합니다.\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"1️⃣ accessToken이 유효할 경우 : 통과\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"2️⃣ accessToken이 유효하지 않을 경우 : 3️⃣ 으로 넘어갑니다.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"3️⃣ refrehsToken이 유효할 경우, refreshToken으로 accessToken을 재발행 : 통과\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"4️⃣ refreshToken이 유효하지 않을 경우 : 에러를 보냅니다.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"그리고 middleware.ts 파일에서 페이지 이동마다 cookie에 있는 accessToken을 확인합니다.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-ts\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-ts code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"1\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// # middleware.ts\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"export\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function-variable function\",\"children\":\"middleware\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"request\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" NextRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"3\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" nextUrl \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"4\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"5\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" isValidAccessToken \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"checkAccessToken\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"token\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"getAccessToken\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"6\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" isValidRefreshToken \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"checkRefreshToken\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"token\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"getRefreshToken\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"7\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"8\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" NextResponse\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"next\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"9\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"10\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"11\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function-variable function\",\"children\":\"checkAccessToken\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"accessToken\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token builtin\",\"children\":\"string\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"null\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"12\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"try\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"13\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"!\"}],\"accessToken\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"14\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"15\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"axiosInstance\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"16\",\"children\":[\"      method\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'POST'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"17\",\"children\":[\"      url\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"CONSTRAINT_URL\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"VALIDATE_ACCESS_TOKEN\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"18\",\"children\":[\"      headers\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"19\",\"children\":[\"        Authorization\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token template-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"Bearer \"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],\"accessToken\",[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"20\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"21\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"22\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"true\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"23\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"catch\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"err\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"24\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"25\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"26\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"27\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"28\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function-variable function\",\"children\":\"checkRefreshToken\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"refreshToken\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token builtin\",\"children\":\"string\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"null\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"29\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"try\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"30\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"!\"}],\"refreshToken\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"31\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"32\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"axiosInstance\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"33\",\"children\":[\"      method\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'POST'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"34\",\"children\":[\"      url\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"CONSTRAINT_URL\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"VALIDATE_REFRESH_TOKEN\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"35\",\"children\":[\"      headers\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"36\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token string-property property\",\"children\":\"'Refresh-Token'\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token template-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],\"refreshToken\",[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"37\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"38\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"39\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"true\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"40\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"catch\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"err\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"41\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"42\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"43\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"44\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"45\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function-variable function\",\"children\":\"cookieToken\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"46\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" cookieStore \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"cookies\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"47\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"48\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"49\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"get\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getAccessToken\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"50\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" cookieStore\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"get\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"COOKIE_KEYS\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"ACCESS_TOKEN\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?.\"}],\"value \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"||\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"null\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"51\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"52\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"get\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getRefreshToken\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"53\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" cookieStore\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"get\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"COOKIE_KEYS\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"REFRESH_TOKEN\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?.\"}],\"value \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"||\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"null\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"54\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"55\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"56\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"1️⃣ 인가된 사용자만 들어올 수 있는 페이지에 인가 사용자가 접근한 경우 : 통과\"}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"2️⃣ 인가된 사용자만 들어올 수 있는 페이지에 비인가 사용자가 접근한 경우\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-ts\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-ts code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"1\",\"children\":[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"/**\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"2\",\"children\":[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\" * **비인가 사용자**가 인증이 요구되는 페이지에 접근한 경우, 로그인 페이지로 리다이렉트\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"3\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\" */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"4\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" isPrivatePath \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" Object\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"values\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"PRIVATE_PATH\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"some\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"path \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" nextUrl\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"pathname\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"includes\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"path\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"5\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"isPrivatePath \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u0026\u0026\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"!\"}],\"isValidAccessToken \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"||\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"!\"}],\"isValidRefreshToken\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"6\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" res \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" NextResponse\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"redirect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"URL\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token template-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"/\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],\"locale\",[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"PATH\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"LOGIN\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"url\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"7\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"8\",\"children\":[\"  res\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"cookies\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"delete\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"COOKIE_KEYS\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"ACCESS_TOKEN\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"9\",\"children\":[\"  res\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"cookies\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"delete\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"COOKIE_KEYS\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"REFRESH_TOKEN\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"10\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"11\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" res\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"12\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"1️⃣ refreshToken이 유효할 경우, accessToken을 재발행 : 통과\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"2️⃣ refreshToken이 유효하지 않을 경우 : 로그인페이지 리다이렉트\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"3️⃣ 비인가된 사용자만 들어올 수 있는 페이지에 인가 사용자가 접근한 경우 : 메인페이지 리다이렉트\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-ts\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-ts code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"1\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// Auth redirect\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"2\",\"children\":[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"/**\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"3\",\"children\":[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\" * **인증된 사용자**가 비인증이 요구되는 페이지에 접근한 경우, 메인 페이지로 리다이렉트\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"4\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\" */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"5\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" isPublicAccess \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"PUBLIC_PATHS\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"some\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"path \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" nextUrl\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"pathname\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"includes\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"path\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"6\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"isPublicAccess \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u0026\u0026\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"isValidAccessToken \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"||\"}],\" isValidRefreshToken\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"7\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" NextResponse\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"redirect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"URL\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token template-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"/\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],\"locale\",[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"PRIVATE_PATH\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"ANALYSIS_NOT_ANALYZED\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"url\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"8\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"4️⃣ 비인가된 사용자만 들어올 수 있는 페이지에 비인가 사용자가 접근한 경우\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"1️⃣ refreshToken이 유효할 경우, accessToken을 재발행 : 메인페이지 리다이렉트\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"2️⃣ refreshToken이 유효하지 않을 경우 : 통과\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"왜-accesstoken-refreshtoken의-유효성을-검사하고-재발행할까요\",\"children\":[[\"$\",\"a\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#왜-accesstoken-refreshtoken의-유효성을-검사하고-재발행할까요\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"왜 accessToken, refreshToken의 유효성을 검사하고 재발행할까요?\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"그 이유는 여러번 API호출하고 코드를 조금 더 이해하기 쉽게 만들기 위해서입니다.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"만약 토큰을 유효성검사를 하지 않으면 아래와 같은 flow일 겁니다. 예시로, user 정보 데이터를 불러와야하는 경우를 들겠습니다.\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"프론트엔드에서 유저 정보를 가져오는 API를 호출합니다.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"ol\",null,{\"start\":\"2\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"백엔드에서는 401 에러를 내뱉습니다.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"ol\",null,{\"start\":\"3\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"프론트엔드에서는 401 에러를 캐치하고, refreshToken의 유효성을 검사합니다.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"ol\",null,{\"start\":\"4\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"refreshToken이 유효하면 accessToken을 재발행합니다.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"ol\",null,{\"start\":\"5\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"재발행한 accessToken을 cookie에 추가합니다.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"ol\",null,{\"start\":\"6\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"다시, 유저 정보를 가져오는 API를 호출합니다.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"그리고, 토큰을 유효성 검사를 하게되면 아래와 같은 flow일 겁니다. 예시는 동일합니다.\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"프론트엔드에서 accessToken의 유효성을 검사합니다.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"ol\",null,{\"start\":\"2\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"accessToken의 유효하지 않다면 refreshToken의 유효성을 검사합니다.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"ol\",null,{\"start\":\"3\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"refreshToken이 유효하면 accessToken을 재발행합니다.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"ol\",null,{\"start\":\"4\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"재발행한 accessToken을 cookie에 추가합니다.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"ol\",null,{\"start\":\"5\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"프론트엔드에서 유저 정보를 가져오는 API를 호출합니다.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"첫번째 경우에는 코드 실행순서가 위에서 아래로갔다가 다시 위로 가는 코드를 작성해야하기 때문에 가독성이 나쁩니다.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"두번째 경우에는 코드 실행순서가 위에서 아래로 이동하기 때문에 가독성이 좋습니다.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"마지막-소감\",\"children\":[[\"$\",\"a\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#마지막-소감\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"마지막 소감\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"백엔드와 프론트엔드에서 인증토큰을 관리해본 경험이 있습니다. 둘다 해보았을 때 저는 백엔드에서 인증토큰을 관리하는게 훨씬 편했습니다.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"인증토큰을 생성하는 쪽 따로, 관리하는 쪽 따로 있다는 것은 이슈가 발생했을 때 어느쪽에서 이슈가 발생했는지 원인을 찾기가 어려울 것 같다는 생각을 갖게되었습니다.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"또한, 프론트엔드에서 인증을 하기 위해 모든 API에 토큰이 유효한지 체킹하는 것이 대규모 서비스를 사용할 경우에는 서버 과부하의 문제가 발생하지 않을까 하는 우려되는 부분도 있습니다.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"하지만, 인증 토큰에 대해서 잘 알고 이슈가 발생하더라도 대처를 잘 할 줄 안다면, 프론트엔드이든 백엔드이든 관리만 잘 된다면 문제가 없을 거라는 생각을 하게되었습니다.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"이 경험을 통해, 프론트엔드/백엔드 측에서의 생각의 시야를 넓히게된 좋은 경험이었습니다.\"}],\"\\n\"]}]]]}],[\"$\",\"$L10\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"flex flex-col gap-2 border-l-2 border-gray-200\",\"children\":[[\"$\",\"a\",\"#도입\",{\"className\":\"block cursor-pointer break-all border-l-2 border-transparent py-1 hover:border-blue-600 hover:text-blue-300\",\"href\":\"#도입\",\"style\":{\"paddingLeft\":10},\"children\":\"도입\"}],[\"$\",\"a\",\"#백엔드에서-인증-토큰-관리하기\",{\"className\":\"block cursor-pointer break-all border-l-2 border-transparent py-1 hover:border-blue-600 hover:text-blue-300\",\"href\":\"#백엔드에서-인증-토큰-관리하기\",\"style\":{\"paddingLeft\":20},\"children\":\"백엔드에서 인증 토큰 관리하기\"}],[\"$\",\"a\",\"#왜-그렇게-생각했나요\",{\"className\":\"block cursor-pointer break-all border-l-2 border-transparent py-1 hover:border-blue-600 hover:text-blue-300\",\"href\":\"#왜-그렇게-생각했나요\",\"style\":{\"paddingLeft\":30},\"children\":\"왜 그렇게 생각했나요?\"}],[\"$\",\"a\",\"#그래서-어떻게-했나요\",{\"className\":\"block cursor-pointer break-all border-l-2 border-transparent py-1 hover:border-blue-600 hover:text-blue-300\",\"href\":\"#그래서-어떻게-했나요\",\"style\":{\"paddingLeft\":30},\"children\":\"그래서 어떻게 했나요?\"}],[\"$\",\"a\",\"#프론트엔드에서-인증토큰-관리하기\",{\"className\":\"block cursor-pointer break-all border-l-2 border-transparent py-1 hover:border-blue-600 hover:text-blue-300\",\"href\":\"#프론트엔드에서-인증토큰-관리하기\",\"style\":{\"paddingLeft\":20},\"children\":\"프론트엔드에서 인증토큰 관리하기\"}],[\"$\",\"a\",\"#nextjs에서-인증토큰-관리하기\",{\"className\":\"block cursor-pointer break-all border-l-2 border-transparent py-1 hover:border-blue-600 hover:text-blue-300\",\"href\":\"#nextjs에서-인증토큰-관리하기\",\"style\":{\"paddingLeft\":30},\"children\":\"Next.js에서 인증토큰 관리하기\"}],[\"$\",\"a\",\"#왜-accesstoken-refreshtoken의-유효성을-검사하고-재발행할까요\",{\"className\":\"block cursor-pointer break-all border-l-2 border-transparent py-1 hover:border-blue-600 hover:text-blue-300\",\"href\":\"#왜-accesstoken-refreshtoken의-유효성을-검사하고-재발행할까요\",\"style\":{\"paddingLeft\":30},\"children\":\"왜 accessToken, refreshToken의 유효성을 검사하고 재발행할까요?\"}],[\"$\",\"a\",\"#마지막-소감\",{\"className\":\"block cursor-pointer break-all border-l-2 border-transparent py-1 hover:border-blue-600 hover:text-blue-300\",\"href\":\"#마지막-소감\",\"style\":{\"paddingLeft\":20},\"children\":\"마지막 소감\"}]]}]}]]}]\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"프론트엔드에서 인증 토큰 관리하기.\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"인증 토큰을 프론트엔드에서 관리하면서 느낀점을 정리해보았습니다.\"}],[\"$\",\"link\",\"4\",{\"rel\":\"icon\",\"href\":\"/blog/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}],[\"$\",\"meta\",\"5\",{\"name\":\"next-size-adjust\"}]]\n6:null\n"])</script></body></html>